<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تعيين التوكن السريع</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; text-align: center; }
        button { padding: 10px 20px; margin: 10px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }
        button:hover { background: #0056b3; }
        .success { color: green; font-weight: bold; margin: 10px; }
        .info { background: #f8f9fa; padding: 15px; border-radius: 5px; margin: 10px; }
    </style>
</head>
<body>
    <h1>تعيين التوكن للوصول للمتابعة الفردية</h1>
    
    <div class="info">
        <p>هذه الصفحة لتعيين توكن أمين الخدمة للاختبار السريع</p>
    </div>
    
    <button onclick="setServiceLeaderToken()">تعيين توكن أمين الخدمة</button>
    <button onclick="clearTokens()">مسح التوكنات</button>
    <button onclick="checkTokens()">فحص التوكنات</button>
    
    <div id="result"></div>
    
    <script>
        const serviceLeaderToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4OGYyMTc3NjI0OWIzODJjZTkzYmZmNiIsInJvbGUiOiJzZXJ2aWNlTGVhZGVyIiwidXNlcm5hbWUiOiJhbWluX2toZWRtYSIsImlhdCI6MTc1NDIxMDg4MSwiZXhwIjoxNzU0ODE1NjgxfQ.lJ3k1ftAG326g27f3aZ-OPX07Uz_VT7d2p4lbPyAaeE';
        
        function setServiceLeaderToken() {
            try {
                localStorage.setItem('auth_token', serviceLeaderToken);
                localStorage.setItem('userToken', serviceLeaderToken);
                
                // Also set in cookies as fallback
                document.cookie = `auth_token=${serviceLeaderToken}; path=/; max-age=604800`;
                document.cookie = `userToken=${serviceLeaderToken}; path=/; max-age=604800`;
                
                document.getElementById('result').innerHTML = '<div class="success">✅ تم تعيين التوكن بنجاح!</div>';
                
                // Redirect to children tracking page
                setTimeout(() => {
                    window.location.href = '/children-tracking';
                }, 1000);
            } catch (error) {
                document.getElementById('result').innerHTML = '<div style="color: red;">❌ خطأ في تعيين التوكن: ' + error.message + '</div>';
            }
        }
        
        function clearTokens() {
            localStorage.removeItem('auth_token');
            localStorage.removeItem('userToken');
            document.cookie = 'auth_token=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;';
            document.cookie = 'userToken=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;';
            document.getElementById('result').innerHTML = '<div style="color: orange;">🗑️ تم مسح التوكنات</div>';
        }
        
        function checkTokens() {
            const authToken = localStorage.getItem('auth_token');
            const userToken = localStorage.getItem('userToken');
            
            let result = '<div class="info">';
            result += '<h3>حالة التوكنات:</h3>';
            result += '<p>auth_token: ' + (authToken ? '✅ موجود' : '❌ غير موجود') + '</p>';
            result += '<p>userToken: ' + (userToken ? '✅ موجود' : '❌ غير موجود') + '</p>';
            result += '</div>';
            
            document.getElementById('result').innerHTML = result;
        }
        
        // Check tokens on page load
        window.onload = function() {
            checkTokens();
        };
    </script>
</body>
</html>
